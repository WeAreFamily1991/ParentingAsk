/************************************************************
 *  * EaseMob CONFIDENTIAL
 * __________________
 * Copyright (C) 2013-2014 EaseMob Technologies. All rights reserved.
 *
 * NOTICE: All information contained herein is, and remains
 * the property of EaseMob Technologies.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from EaseMob Technologies.
 */

#import "ConvertToCommonEmoticonsHelper.h"
#import "Emoji.h"

static NSString * kStr_01 =@"/::~"  ;
static NSString * kStr_02 =@"/::$"  ;
static NSString * kStr_03 =@"/::X"  ;
static NSString * kStr_04 =@"/::'(" ;
static NSString * kStr_05 =@"/::O"  ;
static NSString * kStr_06 =@"/:--b" ;
static NSString * kStr_07 =@"/::T";
static NSString * kStr_08 =@"/:,@-D";
static NSString * kStr_09 =@"/::g";
static NSString * kStr_10 =@"/:|-)";
static NSString * kStr_11 =@"/::!";
static NSString * kStr_12 =@"/::,@";
static NSString * kStr_13 =@"/:,@f";
static NSString * kStr_14 =@"/::-S";
static NSString * kStr_15 =@"/:?";
static NSString * kStr_16 =@"/:,@x";
static NSString * kStr_17 =@"/:,@@";
static NSString * kStr_18 =@"/::8";
static NSString * kStr_19 =@"/:,@!";
static NSString * kStr_20 =@"/:xx";
static NSString * kStr_21 =@"/:bye";
static NSString * kStr_22 =@"/:wipe";
static NSString * kStr_23 =@"/:dig";
static NSString * kStr_24 =@"/:&-(";
static NSString * kStr_25 =@"/:<@";
static NSString * kStr_26 =@"/:@>";
static NSString * kStr_27 =@"/::-O";
static NSString * kStr_28 =@"/:>-|";
static NSString * kStr_29 =@"/:P-(";
static NSString * kStr_30 =@"/::'|";
static NSString * kStr_31 =@"/:@x";
static NSString * kStr_32 =@"/:8*";
static NSString * kStr_33 =@"/:pd";
static NSString * kStr_34 =@"/:<W>";
static NSString * kStr_35 =@"/:beer";
static NSString * kStr_36 =@"/:basketb";
static NSString * kStr_37 =@"/:oo";
static NSString * kStr_38 =@"/:coffee";
static NSString * kStr_39 =@"/:eat";
static NSString * kStr_40 =@"/:pig";
static NSString * kStr_41 =@"/:fade";
static NSString * kStr_42 =@"/:cake";
static NSString * kStr_43 =@"/:li";
static NSString * kStr_44 =@"/:bome";
static NSString * kStr_45 =@"/:kn";
static NSString * kStr_46 =@"/:footb";
static NSString * kStr_47 =@"/:ladybug";
static NSString * kStr_48 =@"/:shit";
static NSString * kStr_49 =@"/:gift";
static NSString * kStr_50 =@"/:hug";
static NSString * kStr_51 =@"/:share";
static NSString * kStr_52 =@"/:cake";
static NSString * kStr_53 =@"/:v";
static NSString * kStr_54 =@"/:@)";
static NSString * kStr_55 =@"/:jj";
static NSString * kStr_56 =@"/:@@";
static NSString * kStr_57 =@"/:bad";
static NSString * kStr_58 =@"/:lvu";
static NSString * kStr_59 =@"/:no";
static NSString * kStr_60 =@"/:ok";
static NSString * kStr_61 =@"/:love";
static NSString * kStr_62 =@"/:<L>";
static NSString * kStr_63 =@"/:jump";
static NSString * kStr_64 =@"/:shake";
static NSString * kStr_65 =@"/:<O>";
static NSString * kStr_66 =@"/:circle";
static NSString * kStr_67 =@"/:kotow";
static NSString * kStr_68 =@"/:turn";
static NSString * kStr_69 =@"/:skip";
static NSString * kStr_70 =@"Óêï";
static NSString * kStr_71 =@"Óêâ";
static NSString * kStr_72 =@"Óêê";
static NSString * kStr_73 =@"Óêç";
static NSString * kStr_74 =@"ÓÑá";
static NSString * kStr_75 =@"ÓêÉ";
static NSString * kStr_76 =@"ÓêÖ";
static NSString * kStr_77 =@"Óêä";
static NSString * kStr_78 =@"Óêé";
static NSString * kStr_79 =@"ÓÑö";
static NSString * kStr_80 =@"ÓÑõ";
static NSString * kStr_81 =@"Óê∑";
static NSString * kStr_82 =@"Óêù";
static NSString * kStr_83 =@"ÓÖå";
static NSString * kStr_84 =@"ÓÑØ";
static NSString * kStr_85 =@"Óçã";
static NSString * kStr_86 =@"Óåí";
static NSString * kStr_87 =@"ÓÑí";
//static NSString * kStr_88 =@"";
//static NSString * kStr_89 =@"";
//static NSString * kStr_90 =@"";



#define kStr_count 87

@implementation ConvertToCommonEmoticonsHelper

#pragma mark - emotics
+ (NSString *)convertToCommonEmoticons:(NSString *)text {
    int allEmoticsCount = (int)[Emoji allEmoji].count;
    NSMutableString *retText = [[NSMutableString alloc] initWithString:text];
    for(int i=0; i<allEmoticsCount; ++i) {
        NSRange range;
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòä"
                                 withString:@"[):]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÉ"
                                 withString:@"[:D]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòâ"
                                 withString:@"[;)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÆ"
                                 withString:@"[:-o]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòã"
                                 withString:@"[:p]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòé"
                                 withString:@"[(H)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò°"
                                 withString:@"[:@]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòñ"
                                 withString:@"[:s]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò≥"
                                 withString:@"[:$]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòû"
                                 withString:@"[:(]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò≠"
                                 withString:@"[:'(]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòê"
                                 withString:@"[:|]"
                                    options:NSLiteralSearch
                                      range:range];
        
//        range.location = 0;
//        range.length = retText.length;
//        [retText replaceOccurrencesOfString:@"üòá"
//                                 withString:@"[(a)]"
//                                    options:NSLiteralSearch
//                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò¨"
                                 withString:@"[8o|]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÜ"
                                 withString:@"[8-|]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò±"
                                 withString:@"[+o(]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üéÖ"
                                 withString:@"[<o)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò¥"
                                 withString:@"[|-)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòï"
                                 withString:@"[*-)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò∑"
                                 withString:@"[:-#]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòØ"
                                 withString:@"[:-*]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòè"
                                 withString:@"[^o)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòë"
                                 withString:@"[8-)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üíñ"
                                 withString:@"[(|)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üíî"
                                 withString:@"[(u)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåô"
                                 withString:@"[(S)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåü"
                                 withString:@"[(*)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåû"
                                 withString:@"[(#)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÇ"
                                 withString:@"[(R)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"üòö"
                                 withString:@"[(})]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"üòç"
                                 withString:@"[({)]"
                                    options:NSLiteralSearch
                                      range:range];

        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üíã"
                                 withString:@"[(k)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåπ"
                                 withString:@"[(F)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üëè"
                                 withString:@"[(W)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üëç"
                                 withString:@"[(D)]"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üëé"
                                 withString:@"/:weak"
                                    options:NSLiteralSearch
                                      range:range];
    }
    
    return retText;
}

+ (NSString *)convertToSystemEmoticons:(NSString *)text
{
    if (![text isKindOfClass:[NSString class]]) {
        return @"";
    }
    
    if ([text length] == 0) {
        return @"";
    }
    int allEmoticsCount = (int)[[Emoji allEmoji] count];
    NSMutableString *retText = [[NSMutableString alloc] initWithString:text];
    for(int i=0; i<allEmoticsCount; ++i) {
        NSRange range;
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[):]"
                                 withString:@"üòä"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:D]"
                                 withString:@"üòÉ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[;)]"
                                 withString:@"üòâ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:-o]"
                                 withString:@"üòÆ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:p]"
                                 withString:@"üòã"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(H)]"
                                 withString:@"üòé"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:@]"
                                 withString:@"üò°"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:s]"
                                 withString:@"üòñ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:$]"
                                 withString:@"üò≥"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:(]"
                                 withString:@"üòû"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:'(]"
                                 withString:@"üò≠"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:|]"
                                 withString:@"üòê"
                                    options:NSLiteralSearch
                                      range:range];
        
//        range.location = 0;
//        range.length = retText.length;
//        [retText replaceOccurrencesOfString:@"[(a)]"
//                                 withString:@"üòá"
//                                    options:NSLiteralSearch
//                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[8o|]"
                                 withString:@"üò¨"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[8-|]"
                                 withString:@"üòÜ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[+o(]"
                                 withString:@"üò±"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[<o)]"
                                 withString:@"üéÖ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[|-)]"
                                 withString:@"üò¥"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[*-)]"
                                 withString:@"üòï"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:-#]"
                                 withString:@"üò∑"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[:-*]"
                                 withString:@"üòØ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[^o)]"
                                 withString:@"üòè"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[8-)]"
                                 withString:@"üòë"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(|)]"
                                 withString:@"üíñ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(u)]"
                                 withString:@"üíî"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(S)]"
                                 withString:@"üåô"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(*)]"
                                 withString:@"üåü"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(#)]"
                                 withString:@"üåû"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(R)]"
                                 withString:@"üòÇ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"[(})]"
                                 withString:@"üòö"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"[({)]"
                                 withString:@"üòç"
                                    options:NSLiteralSearch
                                      range:range];

        
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(k)]"
                                 withString:@"üíã"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(F)]"
                                 withString:@"üåπ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(W)]"
                                 withString:@"üëè"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"[(D)]"
                                 withString:@"üëç"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:weak"
                                 withString:@"üëé"
                                    options:NSLiteralSearch
                                      range:range];
        
    }
    
    return retText;
}

//zou 2015-12-10 Ë°®ÊÉÖËΩ¨Êç¢‰∏∫ÂæÆ‰ø°Ë°®ÊÉÖ
+ (NSString *)convertToWebChatEmoticons:(NSString *)text
{
    int allEmoticsCount = (int)[Emoji allEmoji].count;
    NSMutableString *retText = [[NSMutableString alloc] initWithString:text];
    for(int i=0; i<allEmoticsCount; ++i) {
        NSRange range;
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòä"
                                 withString:@"/::)"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÉ"
                                 withString:@"/::D"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòâ"
                                 withString:@"/::P"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÆ"
                                 withString:@"/::|"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòã"
                                 withString:@"/:,@P"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòé"
                                 withString:@"/:8-)"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò°"
                                 withString:@"/::@"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòñ"
                                 withString:@"/::Q"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò≥"
                                 withString:@"/::|"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòû"
                                 withString:@"/::-|"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò≠"
                                 withString:@"/::<"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòê"
                                 withString:@"/::("
                                    options:NSLiteralSearch
                                      range:range];
        
//        range.location = 0;
//        range.length = retText.length;
//        [retText replaceOccurrencesOfString:@"üòá"
//                                 withString:@"[(a)]"
//                                    options:NSLiteralSearch
//                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò¨"
                                 withString:@"/:B-)"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÜ"
                                 withString:@"/::>"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò±"
                                 withString:@"/:!!!"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üéÖ"
                                 withString:@"/::+"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò¥"
                                 withString:@"/::Z"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòï"
                                 withString:@"/:,@o"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üò∑"
                                 withString:@"Óêå"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòØ"
                                 withString:@"/::d"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòè"
                                 withString:@"/:X-)"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòë"
                                 withString:@"/::L"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üíñ"
                                 withString:@"/:heart"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üíî"
                                 withString:@"/:break"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåô"
                                 withString:@"/:moon"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåü"
                                 withString:@"/:sun"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåû"
                                 withString:@"/:sun"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üòÇ"
                                 withString:@"Óêí"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"üòö"
                                 withString:@"/::*"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"üòç"
                                 withString:@"/::B"
                                    options:NSLiteralSearch
                                      range:range];
        
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üíã"
                                 withString:@"/:showlove"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üåπ"
                                 withString:@"/:rose"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üëè"
                                 withString:@"/:handclap"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üëç"
                                 withString:@"/:strong"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"üëé"
                                 withString:@"/:weak"
                                    options:NSLiteralSearch
                                      range:range];
    }
    return retText;
}

//ÂæÆ‰ø°Ë°®ÊÉÖËΩ¨Êç¢‰∏∫ÁéØ‰ø°Ë°®ÊÉÖ
+ (NSString *)convertHuanXinEmoticons:(NSString *)text
{
    int allEmoticsCount = (int)[Emoji allEmoji].count;
    NSMutableString *retText = [[NSMutableString alloc] initWithString:text];
    
    
    for(int i=0; i<allEmoticsCount; ++i) {
        NSRange range;
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::)"
                                 withString:@"üòä"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::D"
                                 withString:@"üòÉ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::P"
                                 withString:@"üòâ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::|"
                                 withString:@"üòÆ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:,@P"
                                 withString:@"üòã"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:8-)"
                                 withString:@"üòé"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::@"
                                 withString:@"üò°"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::Q"
                                 withString:@"üòñ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::|"
                                 withString:@"üò≥"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::-|"
                                 withString:@"üòû"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::<"
                                 withString:@"üò≠"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::("
                                 withString:@"üòê"
                                    options:NSLiteralSearch
                                      range:range];
        
//        range.location = 0;
//        range.length = retText.length;
//        [retText replaceOccurrencesOfString:@"[(a)]"
//                                 withString:@"üòá"
//                                    options:NSLiteralSearch
//                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:B-)"
                                 withString:@"üò¨"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::>"
                                 withString:@"üòÜ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:!!!"
                                 withString:@"üò±"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::+"
                                 withString:@"üéÖ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::Z"
                                 withString:@"üò¥"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:,@o"
                                 withString:@"üòï"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"Óêå"
                                 withString:@"üò∑"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::d"
                                 withString:@"üòØ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:X-)"
                                 withString:@"üòè"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/::L"
                                 withString:@"üòë"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:heart"
                                 withString:@"üíñ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:break"
                                 withString:@"üíî"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:moon"
                                 withString:@"üåô"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:sun"
                                 withString:@"üåü"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:sun"
                                 withString:@"üåû"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"Óêí"
                                 withString:@"üòÇ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"/::*"
                                 withString:@"üòö"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        
        [retText replaceOccurrencesOfString:@"/::B"
                                 withString:@"üòç"
                                    options:NSLiteralSearch
                                      range:range];
        
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:showlove"
                                 withString:@"üíã"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:rose"
                                 withString:@"üåπ"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:handclap"
                                 withString:@"üëè"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:strong"
                                 withString:@"üëç"
                                    options:NSLiteralSearch
                                      range:range];
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"/:weak"
                                 withString:@"üëé"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"Óêç"
                                 withString:@"üò≥"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"ÓÑá"
                                 withString:@"üò±"
                                    options:NSLiteralSearch
                                      range:range];
        
        range.location = 0;
        range.length = retText.length;
        [retText replaceOccurrencesOfString:@"ÓêÖ"
                                 withString:@"üòâ"
                                    options:NSLiteralSearch
                                      range:range];
        
        static NSArray *strArray = nil;
        if (strArray == nil) {
            strArray = [NSArray arrayWithObjects:kStr_01,kStr_02,kStr_03,kStr_04,kStr_05,kStr_06,kStr_07,kStr_08,kStr_09,kStr_10, kStr_11,kStr_12,kStr_13,kStr_14,kStr_15,kStr_16,kStr_17,kStr_18,kStr_19, kStr_20,kStr_21,kStr_22,kStr_23,kStr_24,kStr_25,kStr_26,kStr_27,kStr_28,kStr_29,kStr_30,kStr_31,kStr_32,kStr_33,kStr_34,kStr_35,kStr_36,kStr_37,kStr_38,kStr_39,kStr_40,kStr_41,kStr_42,kStr_43,kStr_44,kStr_45,kStr_46,kStr_47,kStr_48,kStr_49,kStr_50,kStr_51,kStr_52,kStr_53,kStr_54,kStr_55,kStr_56,kStr_57,kStr_58,kStr_59,kStr_60,kStr_61,kStr_62,kStr_63,kStr_64,kStr_65,kStr_66,kStr_67,kStr_68,kStr_69,kStr_70,kStr_71,kStr_72,kStr_73,kStr_74,kStr_75,kStr_76,kStr_77,kStr_78,kStr_79,kStr_80,kStr_81,kStr_82,kStr_83,kStr_84,kStr_85,kStr_86,kStr_87,nil];
        }
        @try {
            [strArray enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
                if ([retText containsString:obj]) {
                    [retText replaceOccurrencesOfString:obj withString:@"[ËØ•Ë°®ÊÉÖ‰∏çÊîØÊåÅ]" options:NSLiteralSearch range:range];
                }
                
            }];
        }
        @catch (NSException *exception) {
            NSLog(@"throw exception is  here!!");
        }
        @finally {
            nil;
        }
        
            }
    return retText;
}


@end
